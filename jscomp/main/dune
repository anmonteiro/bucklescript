(executable
 (name bsc)
 (public_name bsc)
 (modes native)
 (libraries
  js_parser
  bs_hash_stubs
  ext
  common
  depends
  outcome_printer
  core
  napkin
  reason)
 (modules_without_implementation jscmj_main)
 (modules bsc jscmj_main))

(rule
 (target bsc.ml)
 (deps
  (:input js_main.ml)
  ../../package.json
  ../../bsconfig.json
  ../../lib/js/.gitkeep
  ../../lib/es6/.gitkeep)
 (action
  (run cppo %{env:CPPO_FLAGS=} %{input} -o %{target})))

(executable
 (name bspack_main)
 (public_name bspack)
 (modes native)
 (modules bspack_main)
 (flags
  (:standard -w -50))
 (libraries bs_hash_stubs ext common depends unix))

(executable
 (name bsb_main)
 (public_name bsb)
 (modes native)
 (modules bsb_main)
 (libraries bs_hash_stubs ext common bsb cmdliner))

(executable
 (name cmjdump_main)
 (modes native)
 (modules cmjdump_main)
 (libraries bs_hash_stubs ext common depends core))

(executable
 (name cmij_main)
 (modes native)
 (modules cmij_main)
 (flags
  (:standard -w -9))
 (libraries bs_hash_stubs ext common depends core))

(executable
 (name bsb_helper_main)
 (public_name bsb_helper)
 (modes native)
 (modules bsb_helper_main)
 (libraries bsb_helper ext common depends core))

(test
 (name ounit_tests_main)
 (modes native)
 (modules ounit_tests_main)
 (deps
  bsc.exe
  (alias ../runtime/all)
  (alias ../others/all)
  (alias ../stdlib-412/all))
 (libraries
  ounit
  bs_hash_stubs
  ext
  common
  depends
  bsb
  bsb_helper
  core
  ounit_tests))

(library
 (wrapped false)
 (name builtin_datasets)
 (modules builtin_cmi_datasets builtin_cmj_datasets))
